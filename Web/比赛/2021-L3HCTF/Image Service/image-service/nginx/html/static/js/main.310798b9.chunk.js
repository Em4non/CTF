(this.webpackJsonpimage_service=this.webpackJsonpimage_service||[]).push([[0],{163:function(e,t,a){},164:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(29),i=a.n(r),c=(a(163),a(164),a(59)),l=a(20),o=a(32),j=a(45),d=a(46),h=a(48),b=a(47),u=a(259),p=a(260),O=a(56),m=a(157),x=a(82),f=a(44),g=a(39),v=a.n(g),y=a(4),I=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"onRegister",value:function(e){var t=new FormData;for(var a in e)t.append(a,e[a]);v.a.post("/api/user/register",t).then((function(e){console.log(123),m.b.success(e.data)})).catch((function(e){m.b.error(e.toString()+" : "+e.response.data)}))}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{children:[Object(y.jsx)(x.a,{type:"flex",justify:"center",align:"middle",style:{paddingTop:"10em"},children:Object(y.jsx)("h1",{children:"Register"})}),Object(y.jsx)(x.a,{type:"flex",justify:"center",align:"middle",style:{paddingTop:"1em"},children:Object(y.jsx)(f.a,{children:Object(y.jsxs)(u.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},autoComplete:"off",onFinish:this.onRegister.bind(this),children:[Object(y.jsx)(u.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(y.jsx)(p.a,{})}),Object(y.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(y.jsx)(p.a.Password,{})}),Object(y.jsxs)(u.a.Item,{wrapperCol:{offset:4,span:16},children:[Object(y.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Register"}),Object(y.jsx)(O.a,{onClick:function(){e.props.navigate("/login")},children:"Go Login"})]})]})})})]})}}]),a}(n.a.Component);var w=function(e){var t=Object(l.f)();return Object(y.jsx)(I,Object(o.a)(Object(o.a)({},e),{},{navigate:t}))},C=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"onRegister",value:function(e){var t=this,a=new FormData;for(var s in e)a.append(s,e[s]);v.a.post("/api/user/login",a).then((function(e){console.log(123),m.b.success(e.data),t.props.navigate("/images")})).catch((function(e){m.b.error(e.toString()+" : "+e.response.data)}))}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{children:[Object(y.jsx)(x.a,{type:"flex",justify:"center",align:"middle",style:{paddingTop:"10em"},children:Object(y.jsx)("h1",{children:"Login"})}),Object(y.jsx)(x.a,{type:"flex",justify:"center",align:"middle",style:{paddingTop:"1em"},children:Object(y.jsx)(f.a,{children:Object(y.jsxs)(u.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},autoComplete:"off",onFinish:this.onRegister.bind(this),children:[Object(y.jsx)(u.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(y.jsx)(p.a,{})}),Object(y.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(y.jsx)(p.a.Password,{})}),Object(y.jsxs)(u.a.Item,{wrapperCol:{offset:4,span:16},children:[Object(y.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Login"}),Object(y.jsx)(O.a,{onClick:function(){e.props.navigate("/register")},children:"Go Register"})]})]})})})]})}}]),a}(n.a.Component);var S=function(e){var t=Object(l.f)();return Object(y.jsx)(C,Object(o.a)(Object(o.a)({},e),{},{navigate:t}))},k=a(257),F=a(255),L=a(254),T=a(128),P=a(256),R=a(264),N=L.a.Header,D=L.a.Content,q=L.a.Footer,z=["https://i.loli.net/2021/11/08/qeDwd94TyCL8PcB.jpg","https://i.loli.net/2021/11/08/Py8FLVmsxIH2KG4.jpg"],B=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={images:[]},e.refreshImagesList(),e}return Object(d.a)(a,[{key:"refreshImagesList",value:function(){var e=this;return v.a.get("/api/image/list").then((function(t){e.setState({images:t.data})})).catch((function(t){t.response?401===t.response.status?e.props.navigate("/login"):m.b.error(t.response.data):m.b.error(t.toString())})),z}},{key:"onUploadChange",value:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?m.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&m.b.error("".concat(e.file.name," file upload failed.")),this.refreshImagesList()}},{key:"render",value:function(){var e=this;return Object(y.jsxs)(L.a,{className:"layout",children:[Object(y.jsxs)(N,{children:[Object(y.jsx)("div",{className:"logo"}),Object(y.jsxs)(T.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:[Object(y.jsx)(T.a.Item,{children:"Images"},1),Object(y.jsx)(T.a.Item,{onClick:function(){e.props.navigate("/sharelist")},children:"ShareList"},2),Object(y.jsx)(T.a.Item,{onClick:function(){e.props.navigate("/login")},children:"Logout"},3)]})]}),Object(y.jsx)(D,{style:{padding:"0 50px"},children:Object(y.jsxs)("div",{className:"site-layout-content",children:[Object(y.jsx)(x.a,{children:Object(y.jsx)(P.a,{action:"/api/image/upload",name:"image",onChange:this.onUploadChange.bind(this),children:Object(y.jsx)(O.a,{icon:Object(y.jsx)(R.a,{}),children:"Click to Upload"})})}),Object(y.jsx)(x.a,{gutter:16,justify:"center",style:{paddingTop:"1em"},children:this.state.images.map((function(e){return Object(y.jsx)(f.a,{children:Object(y.jsx)(F.a,{extra:Object(y.jsx)(c.b,{to:"/share",state:{uuid:e.uuid,url:e.preview_url},children:"Share"}),children:Object(y.jsx)(k.a,{width:200,src:e.preview_url,preview:!1,children:" "})})},e.uuid)}))})]})}),Object(y.jsx)(q,{style:{textAlign:"center"},children:"Images Services"})]})}}]),a}(n.a.Component);var U=function(e){var t=Object(l.f)();return Object(y.jsx)(B,Object(o.a)(Object(o.a)({},e),{},{navigate:t}))},H=a(258),K=a(261),V=a(262),_=a(263),A=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(j.a)(this,a),(s=t.call(this,e)).formRef=n.a.createRef(),s.state={url:e.state.url,shared:!1},s}return Object(d.a)(a,[{key:"onFinish",value:function(e){var t=this;console.log(e);var a=new FormData;for(var s in e)a.append(s,e[s]);a.append("uuid",this.props.state.uuid),v.a.post("/api/share/new",a).then((function(e){t.setState({url:e.data,shared:!1})})).catch((function(e){m.b.error(e.toString()+" : "+e.response.data)}))}},{key:"render",value:function(){var e=this;return this.props.state||(console.log(1),this.props.navigate("/images")),Object(y.jsxs)("div",{children:[Object(y.jsx)(H.a,{className:"site-page-header",onBack:function(){return e.props.navigate(-1)},title:"Share",style:{marginLeft:"50px"}}),",",Object(y.jsxs)(x.a,{style:{paddingTop:"10em"},children:[Object(y.jsx)(f.a,{span:8,offset:4,children:Object(y.jsx)("img",{style:{width:"400px"},src:this.state.url,alt:"none"})}),Object(y.jsxs)(f.a,{span:8,children:[Object(y.jsxs)(u.a,{name:"basic",labelCol:{span:4},wrapperCol:{span:8},initialValues:{x0:0,y0:0,x1:0,y1:0,width:0,height:0,thumbnail:!1,blur:0,text:"",textsize:0,textcolor:"FFFFFF"},onFinish:this.onFinish.bind(this),ref:this.formRef,autoComplete:"off",children:[Object(y.jsx)(u.a.Item,{label:"X0",name:"x0",children:Object(y.jsx)(K.a,{})}),Object(y.jsx)(u.a.Item,{label:"Y0",name:"y0",children:Object(y.jsx)(K.a,{})}),Object(y.jsx)(u.a.Item,{label:"X1",name:"x1",children:Object(y.jsx)(K.a,{})}),Object(y.jsx)(u.a.Item,{label:"Y1",name:"y1",children:Object(y.jsx)(K.a,{})}),Object(y.jsx)(u.a.Item,{label:"Width",name:"width",children:Object(y.jsx)(K.a,{})}),Object(y.jsx)(u.a.Item,{label:"Height",name:"height",children:Object(y.jsx)(K.a,{})}),Object(y.jsx)(u.a.Item,{name:"thumbnail",wrapperCol:{offset:4,span:8},valuePropName:"checked",children:Object(y.jsx)(V.a,{children:"Keep Ratio"})}),Object(y.jsx)(u.a.Item,{label:"Blur Radius",name:"blur",children:Object(y.jsx)(K.a,{})}),Object(y.jsx)(u.a.Item,{label:"Text",name:"text",children:Object(y.jsx)(p.a,{})}),Object(y.jsx)(u.a.Item,{label:"Text Size",name:"textsize",children:Object(y.jsx)(K.a,{defaultValue:"1",min:"0",max:"1000",step:"0.5",stringMode:!0})}),Object(y.jsx)(u.a.Item,{label:"Text Color",name:"textcolor",children:Object(y.jsx)(p.a,{placeholder:"#ffffff"})}),Object(y.jsx)(u.a.Item,{wrapperCol:{offset:4,span:8},children:Object(y.jsx)(O.a,{htmlType:"submit",children:"Preview"})}),Object(y.jsx)(u.a.Item,{wrapperCol:{offset:4,span:8},children:Object(y.jsx)(O.a,{type:"primary",onClick:function(){var t=e.formRef.current.getFieldsValue(!0),a=new FormData;for(var s in t)a.append(s,t[s]);a.append("uuid",e.props.state.uuid),a.append("public","1"),v.a.post("/api/share/new",a).then((function(t){m.b.success("Share success"),e.setState({url:t.data,shared:!0})})).catch((function(e){m.b.error(e.toString()+" : "+e.response.data)}))},children:"Share"})})]}),this.state.shared?Object(y.jsx)(_.a,{showIcon:!0,type:"success",description:"Link: "+this.state.url}):void 0]})]}),Object(y.jsx)(x.a,{})]})}}]),a}(n.a.Component);var G=function(e){var t=Object(l.f)(),a=Object(l.e)();return console.log(a),Object(y.jsx)(A,Object(o.a)(Object(o.a)({},e),{},{navigate:t,state:a.state}))},J=L.a.Header,X=L.a.Content,Y=L.a.Footer,E=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={sharedImages:[]},e}return Object(d.a)(a,[{key:"searchShareList",value:function(e){var t=this,a=new FormData;a.append("username",e),v.a.post("/api/share/list",a).then((function(e){t.setState({sharedImages:e.data})})).catch((function(e){e.response?401===e.response.status?t.props.navigate("/login"):(t.setState({sharedImages:[]}),m.b.error(e.response.data)):m.b.error(e.toString())}))}},{key:"render",value:function(){var e=this;return Object(y.jsxs)(L.a,{className:"layout",children:[Object(y.jsxs)(J,{children:[Object(y.jsx)("div",{className:"logo"}),Object(y.jsxs)(T.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:[Object(y.jsx)(T.a.Item,{onClick:function(){e.props.navigate("/images")},children:"Images"},1),Object(y.jsx)(T.a.Item,{children:"ShareList"},2),Object(y.jsx)(T.a.Item,{onClick:function(){e.props.navigate("/login")},children:"Logout"},3)]})]}),Object(y.jsx)(X,{style:{padding:"0 50px"},children:Object(y.jsxs)("div",{className:"site-layout-content",children:[Object(y.jsx)(x.a,{children:Object(y.jsx)(p.a.Search,{placeholder:"username",style:{width:200},onSearch:this.searchShareList.bind(this)})}),Object(y.jsx)(x.a,{gutter:16,justify:"center",style:{paddingTop:"1em"},children:this.state.sharedImages.map((function(e,t){return Object(y.jsx)(f.a,{children:Object(y.jsx)(F.a,{extra:Object(y.jsx)(O.a,{type:"text",children:"CopyLink"}),children:Object(y.jsx)(k.a,{width:200,src:e,preview:!1,children:" "})})},e+t.toString())}))})]})}),Object(y.jsx)(Y,{style:{textAlign:"center"},children:"Images Services"})]})}}]),a}(n.a.Component);var M=function(e){var t=Object(l.f)();return Object(y.jsx)(E,Object(o.a)(Object(o.a)({},e),{},{navigate:t}))};v.a.defaults.withCredentials=!0;var W=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(c.a,{children:Object(y.jsx)(l.c,{children:Object(y.jsxs)(l.a,{children:[Object(y.jsx)(l.a,{path:"/",element:Object(y.jsx)(U,{})}),Object(y.jsx)(l.a,{path:"/register",element:Object(y.jsx)(w,{})}),Object(y.jsx)(l.a,{path:"/login",element:Object(y.jsx)(S,{})}),Object(y.jsx)(l.a,{path:"/images",element:Object(y.jsx)(U,{})}),Object(y.jsx)(l.a,{path:"/share",element:Object(y.jsx)(G,{})}),Object(y.jsx)(l.a,{path:"/sharelist",element:Object(y.jsx)(M,{})})]})})})})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,265)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),r(e),i(e)}))};i.a.render(Object(y.jsx)(W,{}),document.getElementById("root")),Q()}},[[251,1,2]]]);
//# sourceMappingURL=main.310798b9.chunk.js.map